- name: Install php packages and extensions
  apt:
    name: "{{ packages }}"
    state: present
  vars:
    packages:
      - php7.2
      - libapache2-mod-php
      - php7.2-pspell
      - php7.2-curl
      - php7.2-gd
      - php7.2-intl
      - php7.2-mysql
      - php7.2-xml
      - php7.2-xmlrpc
      - php7.2-ldap
      - php7.2-zip
      - php7.2-soap
      - php7.2-mbstring
  become: yes

- name: Change dir.conf to first look for index.php
  template:
    src: dir.conf
    dest: /etc/apache2/mods-enabled/dir.conf
  become: yes

- name: restart apache for recognizing changes
  service:
    name: apache2
    state: restarted
  become: yes
